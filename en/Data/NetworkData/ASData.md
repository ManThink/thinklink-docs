# 1. AS data
AS data is the real-time application layer data parsed by the LoRaWAN network server (NS) in the ThinkLink(TKL) system. Different from the original NS data, the AS data has been preliminarily decoded according to the device communication protocol defined by ManThink, so that users can view the upstream and downstream structured log information. 

The device communication protocol of ManThink follows [[EN]  PTL-S05 ASP LoRaWAN NS and Application Server Communication Protocol](https://mensikeji.yuque.com/staff-zesscp/gqdw7f/rq1r3c4piwy64fyl?singleDoc#) 

the protocol specifies the format, encoding, message type and interaction process of the data field in detail. Through AS data, users can intuitively monitor the telemetry information (such AS temperature, humidity, and power) reported by the device and the execution of control instructions issued by the platform. 

For scenarios that require access to a third-party system, if you want to obtain data that has not been further processed by the TKL  model, you can subscribe to a specific topic through the MQTT protocol to implement real-time data reception and forwarding. For specific subscription methods and topic  rules, refer to the definitions in the preceding  documents. 

## 1.1. Upstream data example (up)
```json
{
  "if": "loraWAN",
  "gwrx": [
    {
      "eui": "5a53012501030056",
      "chan": 0,
      "lsnr": 14.2,
      "rfch": 0,
      "rssi": -21,
      "time": "2025-09-24T07:07:03.807677Z",
      "tmms": 0,
      "tmst": 1152383989,
      "ftime": 0
    },
    {
      "eui": "5a53012501030011",
      "chan": 3,
      "lsnr": 12.5,
      "rfch": 0,
      "rssi": -97,
      "time": "2025-09-24T07:07:03.807677Z",
      "tmms": 0,
      "tmst": 2679707811,
      "ftime": 0
    },
    {
      "eui": "5a53012501030058",
      "chan": 3,
      "lsnr": 13.8,
      "rfch": 0,
      "rssi": -37,
      "time": "2025-09-24T07:07:03.807677Z",
      "tmms": 0,
      "tmst": 1832384199,
      "ftime": 0
    }
  ],
  "type": "data",
  "token": 56368,
  "moteTx": {
    "codr": "4/5",
    "datr": "SF7BW125",
    "freq": 470.9,
    "modu": "LORA",
    "macAck": "",
    "macCmd": ""
  },
  "geoInfo": {
    "type": "gw:wifi",
    "accuracy": 50,
    "altitude": 0,
    "latitude": 34.19863,
    "longitude": 108.86273
  },
  "moteeui": "6353012af1090498",
  "version": "3.0",
  "userdata": {
    "port": 11,
    "class": "ClassA",
    "seqno": 27464,
    "payload": "IQcDDG4BAADaBB0C538J",
    "confirmed": false
  }
}
```

> **description**: 
>
> + this is a typical uplink data packet, indicating that the terminal device sends data to the Gateway.
> + `gwrx `the array shows the signal quality (RSSI, LSNR) of the frame received by multiple gateways, which can be used to locate the best path or analyze the coverage. 
> + `moteeui `represents the unique identification of the sender device. 
> + `userdata.payload `payload data encoded as Base64 needs to be parsed in conjunction with the model to obtain actual business data (such as sensor values). 
> + `port `fields are used to distinguish between different data types or functional channels. 
> + `geoInfo `the geographic coordinate information of the Gateway is provided, which is applicable to application scenarios that support location services. 
>

## 1.2. Downlink Data Example (dn)
```json
{
  "dn": {
    "if": "loraWAN",
    "type": "data",
    "token": 1758686562078,
    "moteeui": "6353012af1099301",
    "version": "3.0",
    "userdata": {
      "port": 51,
      "type": "data",
      "fpend": false,
      "payload": "/mgSBgNWBQZoHBA1MzMzMzMzM04zAAAAAAAAABY=",
      "dnWaitms": 3000,
      "TxUTCtime": "",
      "confirmed": false,
      "intervalms": 0
    }
  }
}
```

>**description**: 
>
> + this is a typical downlink data packet, indicating that an instruction is delivered from the network server to the terminal device. 
> + `moteeui `specifies the target device address. 
> + `userdata.payload `for the encrypted or encoded instruction content to be issued, it is usually generated by the application layer and sent by NS scheduling. 
> + `port `51, commonly used for device management operations (such as parameter configuration, firmware upgrade, etc.). 
> + `dnWaitms`Indicates the maximum delay time for the system to wait for the downlink window of the device to open, ensuring that data is sent at an appropriate time. 
> + You can check whether the downlink data is successfully scheduled through the AS log, and verify the execution result in combination with the device feedback. 
>

<!-- 这是一张图片，ocr 内容为：THINKLINK TKL DEMO HOME AS DATA DASHBOARD 2025-10-200:01-2025-10-2100:0(日 TIME RANGE: 2 PLEASE ENTER RESET DEVEUI: EXPAND V QUERY APPLICATION DATA NETWORK DATA C工字 NS DATA TYPE DEVEUI GW-EUI OPERATION SEQUENCE NO. INDEX UPDATE TIME DAS DATA 6353012AF1090468 2025-10-20 08:47 30256 5A530125010 COPY CONTENT UP R MAINTENANCE 2025-10-20 08:07:50 6353012AF10A1805 10806 5A530125010 COPY CONTENT UP 3 MODEL 命 SYSTEM POWERED BY ACE I- 1234567890133 GWRX": "EUI":"5A53012501030058", "CHAN":0, "LSNR":13.8, "RFCH":0. "RSSI'': 2025-10-20T00:07:49.807677Z', 'TIME'': TMMS 0, "TMST" 3350503360 "FTIME'':0 LN:1 COL:1 52219 6353012AF1090142 2025-10-20 0806:53 5A530125010 COPY CONTENT UP -->
![](./assets/1760918994108-32731c60-1d4c-407f-8f88-6a0025a8453e.png)

>**Prompt**: This function is applicable to advanced integration scenarios where you need to customize data parsing logic or connect to a private platform. It is recommended that developers compare and verify NS data with AS data during debugging to ensure data consistency. 
>
